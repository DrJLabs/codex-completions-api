{
  "metadata": {
    "captured_at": "2025-10-25T02:24:23.781Z",
    "include_usage": true,
    "codex_bin": "scripts/fake-codex-proto.js",
    "commit": "d7bca3f0447031de8383314542002d1e096d8451",
    "scenario": "streaming-tool-calls"
  },
  "request": {
    "model": "codex-5",
    "stream": true,
    "stream_options": {
      "include_usage": true
    },
    "messages": [
      {
        "role": "user",
        "content": "Stream tool execution"
      }
    ],
    "tools": [
      {
        "type": "function",
        "function": {
          "name": "lookup_user",
          "description": "Returns fake profile information",
          "parameters": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string"
              }
            },
            "required": [
              "id"
            ]
          }
        }
      }
    ],
    "tool_choice": {
      "type": "function",
      "function": {
        "name": "lookup_user"
      }
    }
  },
  "stream": [
    {
      "type": "data",
      "data": {
        "id": "<dynamic-id>",
        "object": "chat.completion.chunk",
        "created": "<timestamp>",
        "model": "codex-5",
        "choices": [
          {
            "index": 0,
            "delta": {
              "role": "assistant"
            },
            "finish_reason": null
          }
        ],
        "usage": null
      }
    },
    {
      "type": "data",
      "data": {
        "id": "<dynamic-id>",
        "object": "chat.completion.chunk",
        "created": "<timestamp>",
        "model": "codex-5",
        "choices": [
          {
            "index": 0,
            "delta": {
              "tool_calls": [
                {
                  "index": 0,
                  "id": "tool_fake_1",
                  "type": "function",
                  "function": {
                    "name": "lookup_user"
                  }
                }
              ]
            },
            "finish_reason": null
          }
        ],
        "usage": null
      }
    },
    {
      "type": "data",
      "data": {
        "id": "<dynamic-id>",
        "object": "chat.completion.chunk",
        "created": "<timestamp>",
        "model": "codex-5",
        "choices": [
          {
            "index": 0,
            "delta": {
              "tool_calls": [
                {
                  "index": 0,
                  "function": {
                    "arguments": "{\"id\":\""
                  }
                }
              ]
            },
            "finish_reason": null
          }
        ],
        "usage": null
      }
    },
    {
      "type": "data",
      "data": {
        "id": "<dynamic-id>",
        "object": "chat.completion.chunk",
        "created": "<timestamp>",
        "model": "codex-5",
        "choices": [
          {
            "index": 0,
            "delta": {
              "tool_calls": [
                {
                  "index": 0,
                  "function": {
                    "arguments": "42"
                  }
                }
              ]
            },
            "finish_reason": null
          }
        ],
        "usage": null
      }
    },
    {
      "type": "data",
      "data": {
        "id": "<dynamic-id>",
        "object": "chat.completion.chunk",
        "created": "<timestamp>",
        "model": "codex-5",
        "choices": [
          {
            "index": 0,
            "delta": {
              "tool_calls": [
                {
                  "index": 0,
                  "function": {
                    "arguments": "\"}"
                  }
                }
              ]
            },
            "finish_reason": null
          }
        ],
        "usage": null
      }
    },
    {
      "type": "data",
      "data": {
        "id": "<dynamic-id>",
        "object": "chat.completion.chunk",
        "created": "<timestamp>",
        "model": "codex-5",
        "choices": [
          {
            "index": 0,
            "delta": {},
            "finish_reason": "tool_calls"
          }
        ],
        "usage": null
      }
    },
    {
      "type": "data",
      "data": {
        "id": "<dynamic-id>",
        "object": "chat.completion.chunk",
        "created": "<timestamp>",
        "model": "codex-5",
        "choices": [],
        "usage": {
          "prompt_tokens": 8,
          "completion_tokens": 0,
          "total_tokens": 8,
          "time_to_first_token": null,
          "throughput_after_first_token": null,
          "emission_trigger": "token_count"
        }
      }
    },
    {
      "type": "done"
    }
  ]
}
