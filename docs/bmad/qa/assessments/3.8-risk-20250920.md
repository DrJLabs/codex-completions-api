---
title: Risk Profile — Story 3.8 (Keploy Evidence & Toggle Enablement)
story: docs/bmad/stories/3.8.keploy-evidence-toggle.md
date: 2025-09-20
reviewer: Quinn (Test Architect)
labels: [qa, risk, keploy, ci, tooling]
---

# Risk Profile: Story 3.8 — Keploy Evidence & Toggle Enablement

Date: 2025-09-20  
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 7
- Critical Risks: 0
- High Risks: 2 (OPS-3801, PERF-3801)
- Medium Risks: 4
- Low Risks: 1
- Overall Story Risk Score: Medium — success depends on disciplined cache migration, loopback-hardening, and evidence capture that proves Keploy replay is reliable under GitHub’s evolving infrastructure limits.

## Risk Summary

| Risk ID   | Category      | Description                                                                                                                                              | Prob | Impact | Score | Priority |
| --------- | ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- | ---- | ------ | ----- | -------- |
| OPS-3801  | Operational   | `actions/cache` v1-v2 and runners < 2.231.0 fail after Feb 1, 2025; Keploy evidence job must migrate to cache v4 and updated runners ahead of brownouts. | 2    | 3      | 6     | High     |
| PERF-3801 | Performance   | GitHub cache stores max 10 GB with 7-day retention and ~125 MB/s throughput; large Keploy snapshots risk eviction and slow uploads.                      | 3    | 2      | 6     | High     |
| OPS-3802  | Operational   | Keploy testing-guide requires hardcoded record/test ports; misconfigured loopback exposes 16789/16790 externally.                                        | 2    | 2      | 4     | Medium   |
| TEST-3801 | Testing       | Keploy supports only one test set at a time in CI; evidence must serialize suites and document impact on parallel jobs.                                  | 3    | 2      | 6     | Medium   |
| REL-3801  | Reliability   | GitHub reported Feb 2025 notification/migration incidents; need status hooks so cache/Keploy failures surface quickly.                                   | 2    | 2      | 4     | Medium   |
| DOC-3801  | Documentation | Without explicit cache upgrade + port-binding steps, rollout issue and tech stack remain incomplete.                                                     | 2    | 2      | 4     | Medium   |
| SEC-3801  | Security      | Keploy proxy defaults (proxyPort 16789, dnsPort 26789) require loopback binding; missing firewall rules risk exposing traffic.                           | 1    | 2      | 2     | Low      |

## Key Drivers

- GitHub cache migration deadline (2025-02-01) with brownouts throughout February; workflows must use `actions/cache@v4` or `@v3.4.0+` and runners ≥ 2.231.0 before evidence capture.
- Cache limits (10 GB, 7-day eviction) and Azure bandwidth ceiling (~125 MB/s) constrain snapshot size; need pruning + chunk metrics.
- Keploy’s current CI limitations (hardcoded ports, sequential test set execution) require serialized runs and strict loopback enforcement.
- Recent GitHub outages show need for status monitoring and fallback guidance during evidence jobs.

## Mitigations & Owners

- OPS-3801 (High) — **Owner: DevOps**: Pin workflows to `actions/cache@v4` (or `@v3.4.0` fallback) and check runner version ≥ 2.231.0 before enabling Keploy. Document brownout dates and add CI assertion failing if deprecated cache revision detected.
- PERF-3801 (High) — **Owner: DevOps/Test**: Track cache artifact sizes, purge obsolete snapshots, and add CI telemetry step that logs upload duration + cache-hit ratio to rollout issue.
- OPS-3802 — **Owner: Dev**: Enforce `127.0.0.1` bindings in `.env.dev`, `.env.example`, and workflows; consider adding `iptables` rule snippet for self-hosted runners.
- TEST-3801 — **Owner: QA**: Document sequential execution plan and add queueing note in test design so future parallelization efforts scope required Keploy upgrades.
- REL-3801 — **Owner: DevOps**: Integrate GitHub status check (REST API or RSS) before Keploy job; fail-fast with actionable message when incidents ongoing.
- DOC-3801 — **Owner: QA/PM**: Update rollout issue, tech stack, and parity docs with cache upgrade steps, limits, and port binding checklist.
- SEC-3801 — **Owner: Dev**: Reiterate loopback requirement in environment docs and verify with `netstat` or `ss` check during local validation.

## Monitoring & Next Steps

- Add CI preflight that verifies cache action version and runner build, logging to job summary.
- Capture cache telemetry (size, upload/download duration, hit/miss) per evidence run and attach to rollout issue.
- Include GitHub status link in runbook; consider Slack webhook for incidents during evidence capture window.

## References

- GitHub cache migration notice and version requirements (2025-02-01 deadline, runner ≥ 2.231.0).
- Docker documentation highlighting API v2-only support from April 15, 2025 and required Buildx/BuildKit minimums.
- GitHub cache usage limits (10 GB per repo, 7-day retention) and throughput constraints (~125 MB/s) from industry benchmarks.
- Keploy testing guide limitations (hardcoded ports, sequential test sets) impacting CI parallelism.
- GitHub February 2025 incident reports underscoring need for status monitoring.
