---
title: NFR Assessment — Story 3.7 (Keploy CLI Rollout & Enablement)
story: docs/bmad/stories/3.7.keploy-cli-rollout.md
date: 2025-09-20
owner: QA (Quinn)
labels: [qa, nfr, keploy]
---

## Scope

Evaluate security, performance, reliability, and maintainability impacts introduced by the Keploy CLI installation helper, CI updates, and documentation changes delivered in Story 3.7.

## Summary

- **Security — PASS**: Install helper enforces loopback bindings (`KEPLOY_HOST_BIND=127.0.0.1`) and refuses to proceed when record/test/DNS ports are already in use, reducing exposure of replay proxies. Docs steer developers away from exposing ports publicly.
- **Performance — CONCERNS**: CI dry-run job records replay duration, but no baseline has been gathered yet because `KEPLOY_ENABLED` remains disabled. Runtime budget and alerting thresholds must be captured during rollout.
- **Reliability — CONCERNS**: Helper and workflow are in place, yet the dry-run job has not executed; replay success/failure rates are unverified. Need at least one canary execution before flipping the flag broadly.
- **Maintainability — PASS**: Consolidated helper script, documented env contract, and issue progress notes keep configuration discoverable and reproducible.

Quality Score: 80 (two CONCERNS).

## Details & Recommendations

### Security (PASS)

- Loopback binding ensures proxy ports stay local-only.
- Port pre-flight prevents collisions with other services.
- Recommendation: When rollout occurs on shared runners, confirm security groups/firewall still block external access even if host bind toggles.

### Performance (CONCERNS)

- No empirical replay timings yet; `replay_duration_seconds` metric will capture once job runs.
- Recommendation: Run canary with `KEPLOY_ENABLED=true` to collect baseline, then configure alert if duration exceeds agreed threshold (e.g., +15% over baseline).

### Reliability (CONCERNS)

- CLI install success on GitHub-hosted runners remains unverified; dry-run job gated off.
- Recommendation: Execute rollout ticket to perform at least one successful CI run, review artefacts, and add automation for failure alerts.

### Maintainability (PASS)

- Helper script centralizes install logic and can be reused locally or in CI.
- `.env*` and documentation updates provide clear toggles.
- Recommendation: Document how to override `KEPLOY_INSTALL_URL` for air-gapped environments if needed.

## Follow-up Actions

1. Flip `KEPLOY_ENABLED=true` in a staging/feature branch to gather replay artefacts and baseline metrics (covers performance & reliability concerns).
2. Add CI alerting for prolonged replay durations once baseline established.

## Decision

NFR Status: **CONCERNS** — Acceptable to proceed with Story 3.7, but rollout ticket must capture real replay evidence before enabling the flag production-wide.

NFR assessment: docs/bmad/qa/assessments/3.7-nfr-20250920.md
