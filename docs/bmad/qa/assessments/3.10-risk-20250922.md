---
title: Risk Profile — Story 3.10 (Release & Backup Hardening)
story: docs/bmad/stories/3.10.release-backup-hardening.md
date: 2025-09-22
reviewer: Quinn (Test Architect)
labels: [qa, risk, release, backups]
---

# Risk Profile: Story 3.10 — Release & Backup Hardening

Date: 2025-09-22  
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 5
- Critical Risks: 0
- High Risks: 1 (TECH-3101)
- Medium Risks: 3
- Low Risks: 1
- Overall Story Risk Score: Medium — success depends on reliably copying artifacts to Google Drive, pruning local assets without losing restore points, and running restore drills that a solo maintainer can sustain.

## Risk Summary

| Risk ID   | Category    | Description                                                                                                                                                                              | Prob | Impact | Score | Priority |
| --------- | ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---- | ------ | ----- | -------- |
| TECH-3101 | Technical   | Google Drive mount may be unavailable (drivefs timeout, network blip) when the backup script runs, silently skipping uploads unless mount health is verified first.                      | 2    | 3      | 6     | High     |
| OPS-3101  | Operational | Solo maintainer may skip recurring restore drills; without verification, Google Drive copies could drift or become incomplete.                                                           | 2    | 2      | 4     | Medium   |
| OPS-3102  | Operational | Google Drive backup folder (`/mnt/gdrive/codex-backups/`) can balloon past the documented keep-count if pruning logic fails or cron is disabled, risking quota exhaustion.               | 2    | 2      | 4     | Medium   |
| TEST-3101 | Testing     | Release workflow may upload artifacts but skip digest verification, allowing corrupted public assets to ship if integrity checks aren’t enforced.                                        | 2    | 2      | 4     | Medium   |
| SEC-3101  | Security    | `.codex-api` tarballs copied to Google Drive could include auth tokens; without optional encryption or sanitization, publishing the repo could leak credentials. (Future-proof warning). | 1    | 2      | 2     | Low      |

## Key Drivers

- Google Drive mounts exposed via `df -h` rely on FUSE/rclone stability; unattended cron jobs must detect mount health before writes.
- GitHub Actions artifact digest support (March 18, 2025) enables lightweight integrity checks without cosign, fitting a solo maintainer workflow.
- Regular restore exercises (monthly file spot-checks, quarterly full restores) are recommended for small teams to keep backups trustworthy.
- 3-2-1 guidance stresses offsite copies with checksum validation; Google Drive provides the offsite tier when combined with sha256 verification.

## Mitigations & Owners

- TECH-3101 (High) — **Owner: Dev**: Make `scripts/codex-data-backup.sh` fail fast when `/mnt/gdrive` is missing or read-only (preflight `mountpoint -q`), log to console, and exit non-zero so cron/email alerts fire.
- OPS-3101 — **Owner: Dev/QA**: Add restore drill checklist (monthly file restore + quarterly dry-run) to `docs/runbooks/stack-recovery.md` and calendar reminders.
- OPS-3102 — **Owner: Dev**: Implement `--keep` enforcement for Google Drive copies (delete oldest tarball after upload) and document manual `du -sh` spot-checks.
- TEST-3101 — **Owner: Dev**: Extend release workflow with `upload-artifact@v4` digest output, add `shasum -c` step before publishing Release assets, and surface digest in release notes.
- SEC-3101 — **Owner: DevOps**: Offer optional `--encrypt` (GPG) flag and document token scrubbing (`jq` filters) before packaging `.codex-api` snapshots.

## Monitoring & Next Steps

- Capture dry-run logs in `docs/bmad/qa/artifacts/3.10/` (snapshot, prune, backup) for review.
- Track Google Drive space quarterly (`du -sh /mnt/gdrive/codex-backups`) and document thresholds in the runbook.
- After implementation, run first restore rehearsal and append results to the Story 3.10 QA Results section.

## References

- GitHub Changelog — Actions artifact digest support (March 18, 2025).
- GitHub Docs — Validating workflow artifacts with digests.
- Backblaze — 3-2-1 backup strategy explainer.
- 1Wire Fiber — Backup restore drill cadence (solo-friendly).
- CloudBacko — Restore drill checksum verification recommendation.
- gdfuse/rclone community scripts for mount health checks.
