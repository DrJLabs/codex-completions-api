---
title: QA Review — Story 2.3 (Per‑Chunk Metadata Consistency)
story: docs/bmad/stories/2.3.phase-c-per-chunk-metadata-consistency.md
date: 2025-09-13
reviewer: Quinn (QA)
---

## Summary

Scope delivered: Every streaming JSON frame carries the full envelope (`id/object/created/model`), `id/created` are stable, intermediate frames use `finish_reason:null` and `usage:null`, finalizer precedes the optional usage frame, and no custom event frames are emitted. Spec updated accordingly.

## Evidence

- verify:all (2025-09-13): Unit 17/17, Integration 25/25 (2 skipped), E2E 15/15.
- New tests: tests/sse-per-chunk-metadata.spec.js (per‑frame envelope + stability), existing suite covers ordering, nulls, usage gating.
- Spec: docs/openai-chat-completions-parity.md updated to state no custom event frames; every JSON frame includes envelope.

## Decision

- Gate: PASS (see gate file docs/bmad/qa/gates/2.3-phase-c-per-chunk-metadata.yml)

## Notes

- Suggest optional metric for missing-envelope frames (should remain zero) and optional dev logs for finalizer/usage frames.
