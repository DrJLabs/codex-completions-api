---
title: NFR Assessment — Story 3.10 (Release & Backup Hardening)
story: docs/bmad/stories/3.10.release-backup-hardening.md
date: 2025-09-22
owner: QA (Quinn)
labels: [qa, nfr, release, backups]
---

## Scope

Evaluate non-functional aspects of the new release snapshot + Google Drive backup workflow, including security, performance, reliability, and maintainability for a solo maintainer.

## Summary

- **Security — PASS**: Snapshot/backup scripts operate on local sources and `.codex-api` data only. Optional GPG encryption (`--encrypt` with `CODEX_BACKUP_GPG_KEY`) prevents credential leakage in offsite copies. Lock files include SHA256 only—no secrets.
- **Performance — PASS**: Tarball creation uses `rsync` staging and `tar` compression; runs on-demand with keep-count pruning. Digest verification adds a single `sha256sum` step. No persistent agents or cron jobs introduced by default.
- **Reliability — PASS**: Release workflow validates digests before publishing. Backup script enforces mount health (`--mount-check`) and creates `.sha256` files; pruning keeps storage bounded. Real backup run (2025-09-22 07:42Z) confirmed successful copy to `/mnt/gdrive`.
- **Maintainability — PASS**: Scripts provide help text, dry-run options, and npm shortcuts (`snapshot:dry-run`, `backup:data`). Runbook, playbook, and README clearly document procedures and restore cadence.

Quality Score: 96.

## Details & Recommendations

### Security (PASS)

- Encryption flag defaults to off but documented; encourage maintainers to set `CODEX_BACKUP_GPG_KEY` in `.env.dev` or host secrets.
- Recommendation: Add `.gitignore` note reminding users not to commit generated archives or lock files with release URLs.

### Performance (PASS)

- Snapshot script excludes heavy dirs (node_modules, releases) when staging; pruning prevents exponential growth.
- Recommendation: Consider piping tar directly to gzip with `pigz` if releases grow significantly, though current size is modest.

### Reliability (PASS)

- Workflow fails if SHA mismatch occurs, reducing risk of corrupted GitHub assets.
- Backup script halts when mount unavailable, aligning with risk TECH-3101. Future idea: add optional retry/backoff flags if Drive momentarily disconnects.

### Maintainability (PASS)

- Scripts are self-documented (`--help`), parameterized, and referenced in docs/runbooks.
- Recommendation: Capture first monthly restore drill output in `docs/bmad/qa/artifacts/3.10/restore-checklist.md` to build institutional memory.

## Decision

NFR Status: **PASS** — Story 3.10 meets non-functional expectations; ready to proceed.

NFR assessment: docs/bmad/qa/assessments/3.10-nfr-20250922.md
