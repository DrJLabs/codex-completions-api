schema: 1
story: "3.6"
story_title: "Story 3.6 â€” Keploy Snapshot CI Integration"
gate: CONCERNS
status_reason: "Keploy installation/replay still pending rollout; partial coverage and NFR concerns remain until CLI is provisioned."
reviewer: "Quinn (Test Architect)"
updated: "2025-09-20T06:05:00Z"
quality_score: 80
expires: "2025-10-04T06:05:00Z"

top_issues:
  - id: "follow-up-keploy-install"
    description: "Provision Keploy CLI across environments and validate replay path before enabling flag."
    refs:
      - "docs/bmad/issues/2025-09-20-keploy-install-config.md"
    status: open
waiver:
  active: false

evidence:
  tests_reviewed: 3
  risks_identified: 2
  trace:
    ac_covered: [1, 2, 3, 4, 5, 6]
    ac_gaps: [1, 4, 6]
  trace_ref: "docs/bmad/qa/assessments/3.6-trace-20250920.md"
  nfr_ref: "docs/bmad/qa/assessments/3.6-nfr-20250920.md"
  risk_ref: "docs/bmad/qa/assessments/3.6-risk-20250919.md"

test_evidence:
  - "npm run test:all (2025-09-20)"
  - "Vitest integration suites (chat.contract.*)"
  - "Playwright chat-contract.spec.js"

trace:
  totals:
    requirements: 6
    full: 3
    partial: 3
    none: 0
  uncovered:
    - ac: "AC-1"
      reason: "Keploy CLI not yet installed on runners; gated by follow-up ticket."
    - ac: "AC-4"
      reason: "Replay path unvalidated in CI until CLI provisioning completes."
    - ac: "AC-6"
      reason: "Dedicated record/test stage with artifact upload deferred to rollout ticket."
  notes: "See docs/bmad/qa/assessments/3.6-trace-20250920.md"

nfr_validation:
  _assessed: [security, performance, reliability, maintainability]
  security:
    status: PASS
    notes: "Fixtures sanitized; only fake credentials stored."
  performance:
    status: CONCERNS
    notes: "Keploy replay runtime unmeasured; enable watchdog post-installation."
  reliability:
    status: CONCERNS
    notes: "Replay path untested until CLI installed; fallback only verified."
  maintainability:
    status: PASS
    notes: "Centralized config/helpers documented; toggles keep workflows manageable."

recommendations:
  immediate:
    - action: "Complete Keploy CLI installation/config rollout and collect replay runtime metrics."
      refs:
        - "docs/bmad/issues/2025-09-20-keploy-install-config.md"
  future:
    - action: "Add CI alerting for `keploy test` duration and exit codes once flag enabled."
      refs:
        - "docs/bmad/architecture/tech-stack.md#Testing & QA"
